#include <stdio.h>
#include <stdlib.h>
#include "../../include/Fight_Info_Struct.h"
#include "../../include/Fight_Info_Operate.h"

void æ£€æŸ¥ç²¾æ€ª(Fight_info * self, Fight_info * opponent, char *ç²¾æ€ªåç§°, char *æ—¶åˆ»)
{
	if (!strcmp(ç²¾æ€ªåç§°, "å°é¾™å¥³") && !self->å°é¾™å¥³å·²è§¦å‘ && self->å·²æŸç”Ÿå‘½>=self->ç²¾æ€ªå›¾é‰´->å°é¾™å¥³_è¡€çº¿)
	{
		if (self->å¤æ´»æœªèµ·èº«) return;
		printf("ğŸ§¥\n%sç²¾æ€ª%sè§¦å‘\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°);
		opponent->å¢ä¼¤ç³»æ•°-=self->ç²¾æ€ªå›¾é‰´->å°é¾™å¥³_å‡ä¼¤;
		self->å°é¾™å¥³å·²è§¦å‘=true;
		return;
	}
		
	if (!strcmp(ç²¾æ€ªåç§°, "å±±æ³½ç²¾") && !self->å±±æ³½ç²¾å·²è§¦å‘ && self->å·²æŸç”Ÿå‘½>=self->ç²¾æ€ªå›¾é‰´->å±±æ³½ç²¾_è¡€çº¿)
	{
		if (self->å¤æ´»æœªèµ·èº«) return;
		printf("ğŸŒ³\n%sç²¾æ€ª%sè§¦å‘\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°);
		è®¡ç®—æœ¬æ¬¡æ²»ç–—(self,opponent,"å±±æ³½ç²¾");
		printf("%sç²¾æ€ªå±±æ³½ç²¾å›è¡€%g%%\n", self->å“ªä¸€æ–¹, self->æœ¬æ¬¡æ²»ç–—*100);
		æ²»ç–—(self);
		self->å±±æ³½ç²¾å·²è§¦å‘=true;
		return;
	}
	

	if (!strcmp(ç²¾æ€ªåç§°, "å¹²é¥­äºº") && !strcmp(æ—¶åˆ», "å›åˆå¼€å§‹æ—¶"))
	{
		if (self->å¤æ´»æœªèµ·èº«) return;
		if (self->å·²æŸç”Ÿå‘½==0) return;
		printf("â—ï¸%sç²¾æ€ª%sè§¦å‘\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°);
		è®¡ç®—æœ¬æ¬¡æ²»ç–—(self,opponent,"å¹²é¥­äºº");
		printf("%sç²¾æ€ªå¹²é¥­äººå›è¡€%g%%\n", self->å“ªä¸€æ–¹, self->æœ¬æ¬¡æ²»ç–—*100 );
		æ²»ç–—(self);
		return;
	}

	if (!strcmp(ç²¾æ€ªåç§°, "å¤§æ ‘å¦–") && !strcmp(æ—¶åˆ», "æ™®æ”»å‰")
		&& self->ç²¾æ€ªå›¾é‰´->å¤§æ ‘å¦–_å±‚æ•°<5)
	{
		self->å¼ºçµç³»æ•° += self->ç²¾æ€ªå›¾é‰´->å¤§æ ‘å¦–_å¼ºçµåŠ æˆ;
		self->ç²¾æ€ªå›¾é‰´->å¤§æ ‘å¦–_å±‚æ•°++;
		printf("â—ï¸%sç²¾æ€ª%sè§¦å‘, ç›®å‰%då±‚",
		 self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°, self->ç²¾æ€ªå›¾é‰´->å¤§æ ‘å¦–_å±‚æ•° );
		 
		if (self->ç²¾æ€ªå›¾é‰´->å¤§æ ‘å¦–_å±‚æ•°==self->ç²¾æ€ªå›¾é‰´->å¤§æ ‘å¦–_æ»¡å±‚) printf("(ç°å·²æ»¡å±‚)");
		printf(", å¼ºçµç³»æ•°%g",self->å¼ºçµç³»æ•°);
		putchar(10);
		return;
	}

	if (!strcmp(ç²¾æ€ªåç§°, "é›·å…¬") && !strcmp(æ—¶åˆ», "çµå…½é‡Šæ”¾æŠ€èƒ½æ—¶")
		&& self->é›·å…¬å±‚æ•°<5)
	{
		if (opponent->å¤æ´»æœªèµ·èº«) return;
		
		self->é›·å…¬å±‚æ•°++;
		è®¡ç®—æœ¬æ¬¡ä¼¤å®³(self,opponent,"é›·å…¬");
		self->æˆ˜æ–—å±æ€§ä¹‹å‡»æ™•+=5;
		
		printf("â—ï¸%sç²¾æ€ª%sè§¦å‘, ç›®å‰%då±‚, é€ æˆ%g%%ä¼¤å®³, æˆ˜æ–—å±æ€§ä¹‹å‡»æ™•%g%%\n",
			   self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°, self->é›·å…¬å±‚æ•°, self->æœ¬æ¬¡ä¼¤å®³ * 100, self->æˆ˜æ–—å±æ€§ä¹‹å‡»æ™•);
			   
		å—ä¼¤(opponent, self, self->æœ¬æ¬¡ä¼¤å®³);
		return;
	}
	
	if (!strcmp(ç²¾æ€ªåç§°, "ç´«æ™´é¾™ç‹®") && !strcmp(æ—¶åˆ», "å›åˆå¼€å§‹æ—¶"))
	{
		if (opponent->å¤æ´»æœªèµ·èº«) return;
		è®¡ç®—æœ¬æ¬¡ä¼¤å®³(self, opponent, "ç´«æ™´é¾™ç‹®ä¼¤");
		printf("â—ï¸%sç²¾æ€ª%sè§¦å‘\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°);
		printf("%sç²¾æ€ª%sé€ æˆä¼¤å®³%g%%\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°, self->æœ¬æ¬¡ä¼¤å®³*100);
		å—ä¼¤(opponent, self, self->æœ¬æ¬¡ä¼¤å®³);
		return;
	}
	
	if (!strcmp(ç²¾æ€ªåç§°, "çš‡å¸") && !strcmp(æ—¶åˆ», "å›åˆå¼€å§‹æ—¶"))
	{
		if (self->çš‡å¸å·²è§¦å‘) return;
		è®¡ç®—æœ¬æ¬¡ä¼¤å®³(self, opponent, "çš‡å¸ä¼¤");
		printf("â—ï¸%sç²¾æ€ª%sè§¦å‘\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°);
		printf("%sç²¾æ€ª%sé€ æˆä¼¤å®³%g%%\n", self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°, self->æœ¬æ¬¡ä¼¤å®³*100);
		å—ä¼¤(opponent, self, self->æœ¬æ¬¡ä¼¤å®³);		
		å‡»æ™•åˆ¤å®šåŠç›¸å…³ç»è¿‡(self, opponent);
		self->çš‡å¸å·²è§¦å‘=true;
		return;
	}
	
	if (!strcmp(ç²¾æ€ªåç§°, "å¤§æ˜ç‹") && !strcmp(æ—¶åˆ», "æ™®æ”»å"))
	{
		// staticä¹Ÿæ˜¯å¯è¡Œçš„ã€‚staticä¹Ÿæ˜¯ä¸€ç§å­˜æ¡£ä½œç”¨ã€‚å®ƒåªåˆå§‹åŒ–ä¸€æ¬¡ã€‚
		// static short å¤§æ˜ç‹å·²è§¦å‘å‡ æ¬¡=0;
		
		if (self->ç²¾æ€ªå›¾é‰´->å¤§æ˜ç‹_å±‚æ•°>=self->ç²¾æ€ªå›¾é‰´->å¤§æ˜ç‹_æ»¡å±‚) return;
		
		æˆ˜æ–—å±æ€§_setter(self, opponent, "æš´å‡»", self->æˆ˜æ–—å±æ€§ä¹‹æš´å‡»+8);
		self->ç²¾æ€ªå›¾é‰´->å¤§æ˜ç‹_å±‚æ•°++;
		printf("â—ï¸%sç²¾æ€ª%sè§¦å‘, ç›®å‰%dæ¬¡",
		 self->å“ªä¸€æ–¹, ç²¾æ€ªåç§°, self->ç²¾æ€ªå›¾é‰´->å¤§æ˜ç‹_å±‚æ•° );
		 
		if (self->ç²¾æ€ªå›¾é‰´->å¤§æ˜ç‹_å±‚æ•°==self->ç²¾æ€ªå›¾é‰´->å¤§æ˜ç‹_æ»¡å±‚) printf("(ç°å·²æ»¡)");
		printf(", æš´å‡»ç‡%g%%",self->æš´å‡»ç‡);
		putchar(10);
	}
	
	
	if (!strcmp(ç²¾æ€ªåç§°, "è™ç¾äºº") && !self->è™ç¾äººå·²è§¦å‘ && self->ç¬¬å‡ å›åˆ==3 && !strcmp(æ—¶åˆ», "å›åˆå¼€å§‹æ—¶"))
	{
		self->å¼ºç–—ç³»æ•°+=0.2;
		self->è™ç¾äººå·²è§¦å‘=true;
	}
}